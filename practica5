CREATE SEQUENCE SEC_PELICULA
START WITH 1
INCREMENT BY 1
NOMAXVALUE
CREATE SEQUENCE SEC_HORARIO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;
CREATE TABLE PELICULA(ID_PELICULA INTEGER, TITULO VARCHAR2(30),
SINOPSIS VARCHAR2(300),
CONSTRAINT PK_ID_PELICULA PRIMARY KEY (ID_PELICULA));

CREATE TABLE SALA(NUM_SALA INTEGER, ID_PELICULA INTEGER,
CONSTRAINT PK_NUM_SALA PRIMARY KEY(NUM_SALA);
CONSTRAINT FK1_ID_PELICULA FOREIGN KEY (ID_PELCULA)
REFERENCES PELICULA(ID_PELICULA));

CREATE TABLE HORARIOS(ID_HORARIOS INTEGER, ID_PELICULA INTEGER,
FECHA DATE,
CONSTRAINT PK_ID_HORARIOS PRIMARY KEY(ID_HORARIOS),
CONSTRAINT FK2_ID_PELICULA FOREIGN KEY(ID_PELICULA)
REFERENCES PELICULA(ID_PELICULA));


--PROCEDIMIENTOS
CREATE OR REPLACE PROCEDURE GUARDAR_PELICULA(MY_ID_PELICULA OUT INTEGER,
MY_TITULO VARCHAR2, MY_SINOPSIS VARCHAR2)AS
BEGIN
SELECT SEC_PELICULA.NEXTVAL INTO MY_ID_PELICULA FROM DUAL;
INSERT INTO PELICULA VALUES(MY_ID_PELICULA, MY_TITULO, MY_SINOPSIS);
END;
/
CREATE OR REPLACE PROCEDURE GUARDAR_SALA(MY_NUM_SALA IN INTEGER, MY_ID_PELICULA
IN INTEGER)AS
BEGIN 
INSERT INTO SALA VALUES(MY_NUM_SALA, MY_ID_PELICULA);
END;
/


CREATE OR REPLACE PROCEDURE GUARDAR_HORARIOS(MY_ID_HORARIOS OUT INTEGER,
MY_ID_PELICULAIN INTEGER, MY_FECHA DATE)AS
BEGIN
SELECT SEC_HORARIOS.NEXTVAL INTO MY_ID_HORARIOS FROM DUAL;
INSERT INTO HORARIOS VALUES (MY_ID_HORARIOS,MY_ID_PELICULA,MY_FECHA);
END;
/
